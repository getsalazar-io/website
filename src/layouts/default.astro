---
import "primeicons/primeicons.css";
import { t, changeLanguage } from "i18next";
import { HeadHrefLangs } from "astro-i18next/components";

const pathParts = Astro.url.pathname.split("/").filter(Boolean);
const currentLocale = pathParts[0] === "it" ? "it" : "en";

changeLanguage(currentLocale);
---

<!doctype html>
<html lang={currentLocale}>
  <head>
    <script is:inline>
      (function () {
        function getCurrentLocaleFromURL() {
          const pathParts = window.location.pathname.split("/").filter(Boolean);
          return pathParts[0] === "it" ? "it" : "en";
        }

        function getBrowserLanguage() {
          const browserLang = navigator.language || navigator.userLanguage;
          const langCode = browserLang.split("-")[0].toLowerCase();
          return langCode === "it" ? "it" : "en";
        }

        function buildLocalizedURL(targetLocale) {
          let currentPath = window.location.pathname;
          const currentSearch = window.location.search;
          const currentHash = window.location.hash;

          currentPath = currentPath.replace(/^\/it(\/|$)/, "/");

          let newPath;
          if (targetLocale === "it") {
            newPath = "/it" + currentPath;
          } else {
            newPath = currentPath;
          }

          newPath = newPath.replace(/\/+/g, "/");

          return newPath + currentSearch + currentHash;
        }

        const urlLocale = getCurrentLocaleFromURL();

        let savedLocale = null;
        try {
          savedLocale = localStorage.getItem("i18nextLng");
        } catch (e) {
        }

        let targetLocale;

        if (savedLocale && (savedLocale === "en" || savedLocale === "it")) {
          targetLocale = savedLocale;
        } else {
          targetLocale = getBrowserLanguage();

          try {
            localStorage.setItem("i18nextLng", targetLocale);
          } catch (e) {
          }
        }

        if (targetLocale !== urlLocale) {
          const newURL = buildLocalizedURL(targetLocale);
          window.location.replace(newURL);
        }
      })();
    </script>

    <link rel="preconnect" href="https://googletagmanager.com" />
    <link rel="preconnect" href="https://js.hsforms.net" />
    <link rel="dns-prefetch" href="https://consent.cookiebot.com" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://getsalazar.io/images/apple-touch-icon.webp"
    />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="description"
      content="Is your backup strategy working? Salazar proves what's truly recoverable. Map asset details to business services and uncover real RPO/RTO gaps in one dashboard."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://getsalazar.io/" />
    <meta
      property="og:title"
      content="Salazar | The missing link between backup and business resilience"
    />
    <meta
      property="og:description"
      content="Don't wait for the next audit or outage. Salazar unifies RPO/RTO visibility and validates your backup strategy across all vendors."
    />
    <meta
      property="og:image"
      content="https://getsalazar.io/images/social-preview.webp"
    />

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://getsalazar.io/" />
    <meta
      property="twitter:title"
      content="Salazar | Backup Governance & Resilience"
    />
    <meta
      property="twitter:description"
      content="Salazar proves what's truly recoverable. Unified RPO/RTO visibility for enterprise backup."
    />
    <meta
      property="twitter:image"
      content="https://getsalazar.io/images/social-preview.webp"
    />
    <HeadHrefLangs />

    <!-- Google Tag Manager -->
    <script async>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-ND7HKQ76");
    </script>
    <!-- End Google Tag Manager -->

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Organization",
            "@id": "https://www.sorint.com/#organization",
            "name": "SORINT.lab",
            "url": "https://www.sorint.com",
            "logo": "https://getsalazar.io/images/apple-touch-icon.webp",
            "sameAs": [
              "https://www.linkedin.com/company/sorint-spain",
              "https://www.instagram.com/sorintlab/"
            ]
          },
          {
            "@type": "SoftwareApplication",
            "name": "Salazar",
            "applicationCategory": "BusinessApplication, SecurityApplication",
            "operatingSystem": "Cloud, Web-based",
            "description": "The missing link between backup and business resilience. Salazar proves what's truly recoverable and ensures compliance.",
            "offers": {
              "@type": "Offer",
              "price": "0",
              "priceCurrency": "EUR",
              "description": "Request a Demo for pricing"
            },
            "author": {
              "@id": "https://www.sorint.com/#organization"
            }
          },
          {
            "@type": "FAQPage",
            "mainEntity": [
              {
                "@type": "Question",
                "name": "Does Salazar replace my backup solution?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Salazar is a Governance and Risk Management tool that shows current recoverability level of the organization unifying RPO/RTO from different backup systems."
                }
              },
              {
                "@type": "Question",
                "name": "Can Salazar trigger remediation?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Salazar doesn't remediate, it exposes gaps through APIs. ITSM tools can easily integrate and take actions."
                }
              },
              {
                "@type": "Question",
                "name": "Does it support multiple backup vendors?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Yes. Salazar supports several backup software vendors allowing to add new data sources, backup systems, etc."
                }
              },
              {
                "@type": "Question",
                "name": "Does it assess replication?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Not today. Salazar focuses on recoverability from backups—the last‑resort foundation for recovery."
                }
              },
              {
                "@type": "Question",
                "name": "How does it handle RTO?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Salazar estimates the potential RTO based on the asset's longest full image backup time. It then calculates the RTO for each asset and flags any misalignment."
                }
              }
            ]
          }
        ]
      }
    </script>
    <title>{t("salazar.title")}</title>
  </head>
  <body>
    <div class="background-image"></div>
    <slot />
  </body>
</html>

<style is:global>
  :root {
    --background: 11 11 11;
    --highlight: 98 186 243;
  }

  @font-face {
    font-family: "DMSans";
    src: url("/fonts/DMSans-VariableFont.ttf");
    font-weight: 100 900;
    font-display: swap;
  }

  html {
    box-sizing: border-box;
    font-family: DMSans;
    font-size: 16px;
    line-height: 20.8px;
  }

  *,
  *:before,
  *:after {
    box-sizing: inherit;
  }

  body,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  ol,
  ul {
    margin: 0;
    padding: 0;
  }

  ol,
  ul {
    list-style: none;
  }

  img {
    max-width: 100%;
    height: auto;
  }
  a {
    text-decoration: none;
    color: white;
  }
  a:hover {
    color: rgb(var(--highlight));
  }
  input,
  textarea {
    appearance: none;
    border-radius: 6px;
    font-size: 14px;
    padding-block: 6px;
    padding-inline: 10px;
    background-color: transparent;
    border: 1px solid rgba(108, 110, 126, 1);
    color: white;
  }
  input::placeholder,
  textarea::placeholder {
    color: rgba(179, 179, 179, 1);
    font-family: DMSans;
  }
  body {
    background-color: rgb(var(--background));
  }

  h1 {
    font-size: 48px;
    font-weight: 700;
    line-height: 52.8px;
    color: rgb(var(--highlight));
  }
  h2 {
    font-size: 40px;
    font-weight: 500;
    line-height: 44px;
  }
  h3 {
    font-size: 28px;
    font-weight: 500;
    line-height: 30.8px;
  }
  h4 {
    font-size: 24px;
    line-height: 31.25px;
    font-weight: 300;
  }
  h5 {
    font-size: 14px;
    line-height: 18.23px;
    font-weight: 400;
  }

  @media (max-width: 768px) {
    h1 {
      font-size: 36px;
      line-height: 110%;
    }
    h2 {
      font-size: 32px;
      line-height: 110%;
    }
    h3 {
      font-size: 28px;
      line-height: 110%;
    }
  }
</style>

<style is:global>
  body {
    width: 100%;
    margin: auto;
    font-weight: 400;
    color: white;
  }

  body .wrapper {
    padding-inline: 20px;
    width: 100%;
  }

  @media screen and (min-width: 768px) {
    body .wrapper {
      min-width: 768px;
      padding-inline: 40px;
    }
  }

  @media screen and (min-width: 1440px) {
    body .wrapper {
      min-width: 1440px;
      padding-inline: 80px;
    }
  }

  .background-image {
    position: absolute;
    right: 0;
    width: 1500px;
    height: 100vh;
    background-image: url("/images/bg_mainPage.webp");
    background-size: contain;
    background-position: top right;
    background-repeat: no-repeat;
    z-index: -1;
    pointer-events: none;
    opacity: 50%;
  }

  @media screen and (max-width: 1439px) {
    .background-image {
      width: 75vw;
    }
  }

  @media screen and (max-width: 768px) {
    .background-image {
      width: 100vw;
    }
  }

  img {
    max-width: 100%;
    height: auto;
    display: block;
  }

  img[style*="height"],
  img[height] {
    height: auto !important;
  }

  .img-fixed,
  .aspect-ratio-container img {
    height: unset;
  }

  .aspect-ratio-container {
    position: relative;
    overflow: hidden;
  }

  .aspect-ratio-container img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }
</style>
